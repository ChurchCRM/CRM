# Locale Translate

Translate missing ChurchCRM terms into the target language using church-appropriate ecclesiastical vocabulary.

## Arguments

`$ARGUMENTS` can be:
- `--locale <poEditorCode>` â€” translate one locale (e.g. `--locale fr`, `--locale af`, `--locale es-MX`)
- `--all` â€” translate every locale that has untranslated terms
- `--list` â€” list locales with missing terms and stop (no translation)

## Instructions

### Step 0 â€” Parse arguments

Read `$ARGUMENTS`. Determine:
- `mode`: `single` if `--locale <code>` is given, `all` if `--all`, `list` if `--list`
- `targetLocale`: the poEditor code if mode is `single`

If no valid argument is given, tell the user to run `/locale-translate --locale <code>` or `/locale-translate --all`, then stop.

### Step 1 â€” List available locales (always do this first)

Run:
```bash
node locale/scripts/locale-translate.js --list
```

If mode is `list`, print the output and stop.

### Step 2 â€” Determine which locales to translate

- **single mode**: use just that locale code
- **all mode**: parse the `--list` output to get every locale code shown

### Step 3 â€” For each target locale, translate all batch files

For each locale code, run:
```bash
node locale/scripts/locale-translate.js --info --locale <code>
```

This returns JSON containing:
- `name` â€” human-readable language name
- `countryCode` â€” two-letter country code
- `batchFiles[]` â€” each with `path` and `terms` (the untranslated JSON object)

### Step 4 â€” Apply denomination context

Use the country code to select the right denomination/vocabulary context:

| Country | Context |
|---------|---------|
| EG | **Coptic Orthodox** (Egyptian Arabic) â€” ÙƒÙ†ÙŠØ³Ø©, Ù‚Ø¯Ø§Ø³, Ø±Ø¹ÙŠØ©, ØªÙ‚Ø¯Ù…Ø©. This locale is used almost exclusively by the Coptic Christian community. |
| IT | Roman Catholic â€” parrocchia, offertorio, fedeli |
| ES, MX, CO, AR, SV | Roman Catholic â€” parroquia, ofrenda, feligreses |
| FR | Roman Catholic / Ecumenical â€” paroisse, offrande, fidÃ¨les |
| PT, BR | Catholic / Mixed Evangelical |
| PL | Roman Catholic â€” parafia, ofiara, wierni |
| RO | Romanian Orthodox / Catholic |
| RU | Russian Orthodox â€” Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´, Ğ¿Ğ¾Ğ¶ĞµÑ€Ñ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ¶Ğ°Ğ½Ğµ |
| UA | Ukrainian Orthodox |
| GR | Greek Orthodox â€” ÎµÎ½Î¿ÏÎ¯Î±, Ï€ÏÎ¿ÏƒÏ†Î¿ÏÎ¬, ÎµÎ½Î¿ÏÎ¯Ï„ÎµÏ‚ |
| DE | Protestant/Lutheran â€” Gemeinde, Spende, Gemeindemitglieder |
| SE, NO, FI, EE | Lutheran |
| NL | Protestant/Reformed |
| KR | Evangelical/Presbyterian â€” êµíšŒ, í—Œê¸ˆ, ì„±ë„ |
| TW | Evangelical/Presbyterian |
| CN | Protestant/Three-Self â€” æ•™ä¼š, å¥‰çŒ®, ä¼šä¼— |
| GB, AU | Anglican / Ecumenical |
| ET | Ethiopian Orthodox / Protestant |
| IN | Broadly Christian / Non-denominational |
| ID | Protestant/Catholic â€” jemaat, persembahan, anggota gereja |
| IL | Messianic Jewish/Christian |
| ZA | Mixed Protestant |
| _default_ | Broadly Christian, ecumenical |

### Step 5 â€” Church-specific vocabulary rules (apply to every translation)

| English (CRM generic) | Church-appropriate translation |
|---|---|
| Members / Users / Clients | Congregation / Parishioners / Faithful |
| Leads / Prospects | Visitors / Seekers |
| Groups | Small Groups / Life Groups / Ministries |
| Giving / Payments / Transactions | Offerings / Tithes / Stewardship / Contributions |
| Pledge | Financial pledge / commitment to the church |
| Deposit (church finance) | Offering deposit |
| Cart (people selection) | Selection / List |
| Family | Family â€” keep as-is (core church membership unit) |

Standard UI terms (Save, Cancel, Delete, Edit, Search, etc.) â†’ use the normal native-language UI translation.

Format specifiers (`%d`, `%s`, `%1$s`, `%2$d`, etc.) must be preserved **exactly** â€” never translate or remove them.

### Step 6 â€” Translate each batch file

For each batch file returned by `--info`:

1. Identify untranslated terms: string keys with `""` value, or plural objects where any `one`/`other` value is `""`.
2. Translate them into the target language applying the denomination context and church vocabulary rules.
3. For plural forms (`{"one": "", "other": ""}`), produce the grammatically correct singular and plural forms for the target language.
4. Build a JSON object containing **only the keys you translated** (no need to repeat already-translated keys).
5. Write the translations back with:

```bash
node locale/scripts/locale-translate.js --apply --file <batchFilePath> --translations '<json>'
```

### Step 7 â€” Write reviewer notice

After all translations are written, create or overwrite `locale/terms/missing/REVIEW_NOTES.md` with the following content (substituting real values for `<date>`, `<N>`, `<locales>`):

```markdown
# AI Translation Review â€” <date>

These translation files were generated by Claude Code AI on <date>.

**<N> locales translated:** <locales>

## For POEditor Reviewers

These are AI-generated translations and **must be reviewed by a native speaker** before they are accepted as final. Please check:

- [ ] Ecclesiastical vocabulary is appropriate for your denomination and region
- [ ] Format specifiers (`%d`, `%s`, etc.) are preserved exactly
- [ ] Plural forms are grammatically correct for your language
- [ ] UI terms (buttons, labels) sound natural and professional
- [ ] Any church-specific terms (offerings, congregation, ministries) match local usage

If a translation is incorrect, update it directly in POEditor. The AI suggestion is a starting point, not a final answer.

Thank you for reviewing!
```

### Step 8 â€” Report

After processing all files for a locale, print a brief summary:
```
âœ… <Language> (<code>) â€” <N> terms translated across <M> file(s)
```

After all locales are done:
```
ğŸ“Š Done â€” <N> locales, <T> total terms translated

ğŸ“ Review notice written to locale/terms/missing/REVIEW_NOTES.md
ğŸ“¤ Next steps:
   1. Upload locale/terms/missing/**/*.json to POEditor
   2. Share REVIEW_NOTES.md with your POEditor contributors so they know to review the AI translations
   3. After contributors approve/fix translations in POEditor, run: npm run locale:download
```

## Notes

- The `--apply` command merges translations into the batch file â€” already-translated terms are preserved.
- If a batch file has no untranslated terms, skip it silently.
- Work one locale at a time to keep context focused.
- If you are uncertain about a term's ecclesiastical meaning, prefer the most widely understood Christian term for the region over a narrow denominational one.
